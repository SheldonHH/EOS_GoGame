{"version":3,"file":"vuex-persistedstate.es.js","sources":["../node_modules/deepmerge/dist/es.js","../node_modules/shvl/index.js","../index.js"],"sourcesContent":["var isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, optionsArgument) {\n\tvar clone = !optionsArgument || optionsArgument.clone !== false;\n\n\treturn (clone && isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, optionsArgument)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, optionsArgument) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, optionsArgument)\n\t})\n}\n\nfunction mergeObject(target, source, optionsArgument) {\n\tvar destination = {};\n\tif (isMergeableObject(target)) {\n\t\tObject.keys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], optionsArgument);\n\t\t});\n\t}\n\tObject.keys(source).forEach(function(key) {\n\t\tif (!isMergeableObject(source[key]) || !target[key]) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], optionsArgument);\n\t\t} else {\n\t\t\tdestination[key] = deepmerge(target[key], source[key], optionsArgument);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, optionsArgument) {\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar options = optionsArgument || { arrayMerge: defaultArrayMerge };\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, optionsArgument)\n\t} else if (sourceIsArray) {\n\t\tvar arrayMerge = options.arrayMerge || defaultArrayMerge;\n\t\treturn arrayMerge(target, source, optionsArgument)\n\t} else {\n\t\treturn mergeObject(target, source, optionsArgument)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, optionsArgument) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, optionsArgument)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nexport default deepmerge_1;\n","exports.get = function (object, path, def) {\n  return (object = (path.split ? path.split('.') : path).reduce(function (obj, p) {\n    return obj && obj[p]\n  }, object)) === undefined ? def : object;\n};\n\nexports.set = function (object, path, val, obj) {\n  return ((path = path.split ? path.split('.') : path).slice(0, -1).reduce(function (obj, p) {\n    return obj[p] = obj[p] || {};\n  }, obj = object)[path.pop()] = val), object;\n};\n","import merge from 'deepmerge';\nimport shvl from 'shvl';\n\nexport default function(options, storage, key) {\n  options = options || {};\n  storage = options.storage || (window && window.localStorage);\n  key = options.key || 'vuex';\n\n  function canWriteStorage(storage) {\n    try {\n      storage.setItem('@@', 1);\n      storage.removeItem('@@');\n      return true;\n    } catch (e) {}\n\n    return false;\n  }\n\n  function getState(key, storage, value) {\n    try {\n      return (value = storage.getItem(key)) && value !== 'undefined'\n        ? JSON.parse(value)\n        : undefined;\n    } catch (err) {}\n\n    return undefined;\n  }\n\n  function filter() {\n    return true;\n  }\n\n  function setState(key, state, storage) {\n    return storage.setItem(key, JSON.stringify(state));\n  }\n\n  function reducer(state, paths) {\n    return paths.length === 0\n      ? state\n      : paths.reduce(function(substate, path) {\n          return shvl.set(substate, path, shvl.get(state, path));\n        }, {});\n  }\n\n  function subscriber(store) {\n    return function(handler) {\n      return store.subscribe(handler);\n    };\n  }\n\n  if (!canWriteStorage(storage)) {\n    throw new Error('Invalid storage instance given');\n  }\n\n  return function(store) {\n    const savedState = shvl.get(options, 'getState', getState)(key, storage);\n\n    if (typeof savedState === 'object' && savedState !== null) {\n      store.replaceState(merge(store.state, savedState, {\n        arrayMerge: function (store, saved) { return saved },\n        clone: false,\n      }));\n    }\n\n    (options.subscriber || subscriber)(store)(function(mutation, state) {\n      if ((options.filter || filter)(mutation)) {\n        (options.setState || setState)(\n          key,\n          (options.reducer || reducer)(state, options.paths || []),\n          storage\n        );\n      }\n    });\n  };\n};\n"],"names":["const","merge"],"mappings":"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"}